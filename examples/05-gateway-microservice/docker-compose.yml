version: "3.8"

services:
  gateway:
    build: ./gateway
    ports:
      - "8080:8080"
    environment:
      - JWT_SECRET=gateway-secret-at-least-256-bits-for-hs256-signing
    networks:
      - app

  service:
    build: ./service
    ports:
      - "8081:8081"
    environment:
      - GATEWAY_JWT_HEADER=X-JWT-Token
    networks:
      - app
    depends_on:
      - gateway

networks:
  app:
    driver: bridge
